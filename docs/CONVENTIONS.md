# FORD Project Conventions

**Status:** Living Document ‚Ä¢ **Last Updated:** 2025-10-25

This document defines naming conventions, coding standards, and data format rules for the FORD project. All contributors must follow these conventions to ensure consistency across code, data, and documentation.

---

## üî§ **Naming Conventions**

### **General Rules**

| Type | Convention | Example | Notes |
|------|------------|---------|-------|
| **File Names** | `snake_case.ext` | `combat_rules.json` | Lowercase, underscores |
| **Directory Names** | `snake_case` | `data/schemas/` | Lowercase, underscores |
| **Python Modules** | `snake_case` | `skill_system.py` | PEP 8 compliant |
| **Python Classes** | `PascalCase` | `SkillSystem` | No underscores |
| **Python Functions** | `snake_case` | `calculate_damage()` | Lowercase, underscores |
| **Python Constants** | `SCREAMING_SNAKE_CASE` | `MAX_SKILL_CAP` | All caps |

---

## üéÆ **Game Data Conventions**

### **IDs (All JSON Data)**

**Rule:** All IDs use `snake_case`, lowercase, descriptive, no abbreviations unless standard.

| Type | Pattern | Examples | ‚ùå Wrong |
|------|---------|----------|---------|
| **Items** | `{category}_{name}` | `reagent_bloodmoss`, `weapon_broadsword`, `armor_chainmail_tunic` | ~~Bloodmoss~~, ~~broadsword~~, ~~ChainmailTunic~~ |
| **Skills** | `{name}` | `magery`, `swordsmanship`, `evaluate_intelligence` | ~~sorcery~~, ~~Magery~~, ~~eval_int~~ |
| **Spells** | `{name}` | `fireball`, `ice_shards`, `minor_ward` | ~~Fireball~~, ~~IceShards~~, ~~minorWard~~ |
| **Monsters** | `{name}` | `skeleton`, `orc_lord`, `bone_mage` | ~~Skeleton~~, ~~orcLord~~, ~~BoneMage~~ |
| **Quests** | `{short_desc}` | `clear_the_crypt`, `escort_merchant` | ~~clearTheCrypt~~, ~~quest_1~~ |
| **Vendors** | `{location}_{role}` | `abbey_herbalist`, `crypt_blacksmith` | ~~AbbeyHerbalist~~, ~~vendor1~~ |
| **Biomes** | `{type}_{flavor}` | `crypt_undead`, `moor_swamp` | ~~CryptUndead~~, ~~swamp~~ |
| **Factions** | `{name}` | `undead`, `orc`, `daemon` | ~~Undead~~, ~~Orcs~~ |

### **Display Names (Localized)**

**Rule:** Display names are stored in **localization files** (`i18n/en.json`, `i18n/de.json`), not in data files.

**Data files reference IDs only:**
```json
{
  "id": "reagent_bloodmoss",
  "type": "reagent",
  "base_value": 8
}
```

**Localization provides display names:**
```json
{
  "items": {
    "reagent_bloodmoss": {
      "name": "Blood Moss",
      "description": "A crimson moss used in spellcasting."
    }
  }
}
```

**Exception:** `data/spells.json` currently has a `name` field for development convenience. This will be migrated to i18n in Phase 3.

---

## üéØ **Canonical Names (Reference)**

### **Skills (Final Decision)**

| ID | Display Name (EN) | Display Name (DE) | Notes |
|----|-------------------|-------------------|-------|
| `magery` | Magery | Magie | ‚úÖ **Canonical** (not "sorcery") |
| `evaluate_intelligence` | Evaluate Intelligence | Intelligenz Einsch√§tzen | UO classic name |
| `meditation` | Meditation | Meditation | |
| `resist_spells` | Resisting Spells | Zauberwiderstand | ‚úÖ **Canonical** (not "resisting_spells") |
| `swordsmanship` | Swordsmanship | Schwertkunst | |
| `tactics` | Tactics | Taktik | |
| `anatomy` | Anatomy | Anatomie | |
| `healing` | Healing | Heilkunde | |
| `hiding` | Hiding | Verbergen | |
| `stealth` | Stealth | Schleichen | |

### **Reagents (UO Classic)**

| ID | Display Name (EN) | Display Name (DE) | Item Type |
|----|-------------------|-------------------|-----------|
| `reagent_black_pearl` | Black Pearl | Schwarze Perle | reagent |
| `reagent_bloodmoss` | Blood Moss | Blutmoos | reagent |
| `reagent_garlic` | Garlic | Knoblauch | reagent |
| `reagent_ginseng` | Ginseng | Ginseng | reagent |
| `reagent_mandrake_root` | Mandrake Root | Alraunenwurzel | reagent |
| `reagent_nightshade` | Nightshade | Nachtschatten | reagent |
| `reagent_sulfurous_ash` | Sulfurous Ash | Schwefelasche | reagent |
| `reagent_spiders_silk` | Spider's Silk | Spinnenseide | reagent |

**‚úÖ Always reference by ID in data files!**

---

## üìä **JSON Schema Conventions**

### **Common Fields**

| Field | Type | Required | Usage |
|-------|------|----------|-------|
| `id` | `string` | ‚úÖ Yes | Unique identifier, snake_case |
| `name` | `string` | ‚ö†Ô∏è Temporary | Display name (will move to i18n) |
| `type` | `string` | ‚úÖ Yes | Category/classification |
| `description` | `string` | ‚ùå No | Short description (will move to i18n) |

### **Schema Field Names**

**Rule:** Use `name` not `display_name` for consistency.

```json
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "properties": {
    "id": { "type": "string" },
    "name": { "type": "string" },  // ‚úÖ Correct
    "type": { "type": "string" }
  }
}
```

---

## üîß **Code Conventions**

### **Python Style**

- **Formatter:** Black (line-length=88)
- **Linter:** Ruff (follows PEP 8)
- **Type Hints:** Required for all functions
- **Docstrings:** Google style

### **Import Order**

1. Standard library
2. Third-party packages (arcade, pytest, etc.)
3. Local application imports

```python
# ‚úÖ Good
import os
from typing import Dict

import arcade

from game.systems import SkillSystem
```

---

## üìÅ **File Organization**

### **Data Files**

```
data/
  combat_rules.json           # Core combat mechanics
  skills.json                 # Skill definitions
  spells.json                 # Spell definitions
  items/                      # (Future) Item definitions
  monsters/                   # (Future) Monster definitions
  quests/                     # (Future) Quest definitions
  vendors/                    # (Future) Vendor definitions
  biomes/                     # (Future) Biome definitions
  encounters/                 # (Future) Encounter tables
  schemas/                    # JSON schemas for validation
    *.schema.json
```

### **Documentation**

```
docs/
  ARCHITECTURE*.md            # System architecture
  GAMEPLAY*.md                # Gameplay mechanics
  AI_DESIGN.md                # AI architecture
  COMBAT_RULES.md             # Combat formulas
  MAGIC_SYSTEM.md             # Magic mechanics
  ITEMIZATION_DESIGN.md       # Loot & items
  ECONOMY_AND_VENDORS.md      # Economy
  QUEST_SYSTEM.md             # Quests
  DUNGEON_GENERATOR.md        # Proc-gen
  SOUND_DESIGN.md             # Audio
  WORLD_BIBLE.md              # Lore & factions
  LOCALIZATION.md             # i18n
  RELEASE_PLAN.md             # Packaging
  DEVELOPMENT.md              # Dev setup
  CONVENTIONS.md              # This file
  tasks/                      # Task breakdown
```

---

## üåê **Localization Conventions**

### **File Structure**

```
i18n/
  en.json                     # English (base language)
  de.json                     # German
```

### **Key Format**

Hierarchical dot-notation: `category.subcategory.item.field`

```json
{
  "ui": {
    "ok": "OK",
    "cancel": "Cancel"
  },
  "items": {
    "reagent_bloodmoss": {
      "name": "Blood Moss",
      "description": "A crimson moss..."
    }
  },
  "skills": {
    "magery": {
      "name": "Magery",
      "description": "The art of spellcasting."
    }
  }
}
```

---

## ‚úÖ **Validation Rules**

### **CI Checks**

1. **Schema Validation:** All JSON must validate against schemas
2. **Cross-References:** IDs must exist (items, skills, reagents)
3. **Naming Convention:** IDs must match `^[a-z0-9_]+$` pattern
4. **Localization:** All display text must have i18n keys
5. **No Duplicates:** All IDs must be unique within scope

### **Pre-commit Hooks**

- JSON formatting (2-space indent)
- Trailing whitespace removal
- End-of-file fixer
- Markdown linting

---

## üîÑ **Migration Notes**

### **Breaking Changes (Oct 25, 2025)**

**Phase 1 Migration:**
1. ‚úÖ `data/skills.json`: `sorcery` ‚Üí `magery`
2. ‚úÖ `data/spells.json`: Reagent display names ‚Üí IDs
3. ‚úÖ `data/schemas/*.json`: `display_name` ‚Üí `name`
4. ‚úÖ All docs: Updated to use canonical names

**Future Phase 3:**
- Move `name` fields to `i18n/` files
- Remove display text from data files
- Update validation to enforce i18n-only

---

## üìö **References**

- **PEP 8:** Python style guide
- **UO Naming:** Classic Ultima Online conventions
- **JSON Schema:** Draft 2020-12 specification
- **i18n:** ICU MessageFormat for pluralization

---

**Questions?** Check `docs/DEVELOPMENT.md` or ask in project chat.
