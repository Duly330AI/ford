- [ ] ID: TASK-M2-AI-07
  Title: AI-vs-AI Combat & Multi-Faction Encounters
  Status: Proposed
  Priority: P1
  Owner: Copilot Agent
  Created: 2025-10-25
  Artifacts: `game/systems/ai_vs_ai.py`, `tests/systems/test_ai_vs_ai.py`
  DependsOn: TASK-M2-AI-03, TASK-M2-AI-04, TASK-M2-09
  Notes:
  Extend combat loops so AI actors target any hostile faction using utility scoring outputs from TASK-M2-AI-02 and faction standings from TASK-M2-AI-04, as defined in AI_DESIGN.md Section 2 and Section 12.
  Handle multi-faction turn order, initiative, and victory conditions, including scenarios outlined in docs/CROSS_REFERENCE_ANALYSIS.md Section 1 (three-way fight QA case).
  Route loot from AI kills to world drops or corpses so players can loot post-battle, consistent with SAVELOAD and inventory systems.
  Provide instrumentation for QA to record battle logs, kill attribution, and faction outcome summaries.
  Acceptance:
  - [ ] AI actors choose hostile targets beyond the player, using utility scores and faction bias.
  - [ ] Three-faction encounters resolve deterministically with correct initiative rotation and victory detection.
  - [ ] Loot generated by AI-on-AI kills converts to world drops accessible to the player.
  - [ ] Battle logs capture kill attribution and faction outcomes for QA review.
  Tests:
  - [ ] AI-versus-AI unit tests (for example Orc versus Undead) validating hostility checks and victory resolution.
  - [ ] Seeded three-way integration tests covering Player, Orc, and Undead factions.
  - [ ] Loot attribution tests ensuring AI kills drop loot into world containers retrievable by the player.
  References:
  - docs/ARCHITECTURE.md
  - docs/COMBAT_RULES.md
  - docs/CONVENTIONS.md
  - docs/ITEMIZATION_DESIGN.md
